function ltrim(e){return e.replace(/^(\s*|　*)/,"")}function rtrim(e){return e.replace(/(\s*|　*)$/,"")}function trim(e){return ltrim(rtrim(e))}function empty(e){switch(typeof e){case"undefined":return!0;case"string":if(trim(e).length==0)return!0;break;case"boolean":if(!e)return!0;break;case"number":if(0===e)return!0;break;case"object":if(null===e)return!0;if(undefined!==e.length&&e.length==0)return!0;for(var t in e)return!1;return!0}return!1}function MM_goToURL(){var i,args=MM_goToURL.arguments;document.MM_returnValue=!1;for(i=0;i<args.length-1;i+=2)eval(args[i]+".location='"+args[i+1]+"'")}function MM_findObj(e,t){var n,r,i;t||(t=document),(n=e.indexOf("?"))>0&&parent.frames.length&&(t=parent.frames[e.substring(n+1)].document,e=e.substring(0,n)),!(i=t[e])&&t.all&&(i=t.all[e]);for(r=0;!i&&r<t.forms.length;r++)i=t.forms[r][e];for(r=0;!i&&t.layers&&r<t.layers.length;r++)i=MM_findObj(e,t.layers[r].document);return!i&&t.getElementById&&(i=t.getElementById(e)),i}function MM_changeProp(objName,x,theProp,theValue){var obj=MM_findObj(objName);obj&&(theProp.indexOf("style.")==-1||obj.style)&&(theValue==1||theValue==0?eval("obj."+theProp+"="+theValue):eval("obj."+theProp+"='"+theValue+"'"))}function U8_16(e){var t,n,r,i,s,o=[];n=e.length,t=0;while(t<n){r=e.charCodeAt(t++);switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(e.charAt(t-1));break;case 12:case 13:i=e.charCodeAt(t++),o.push(String.fromCharCode((r&31)<<6|i&63));break;case 14:i=e.charCodeAt(t++),s=e.charCodeAt(t++),o.push(String.fromCharCode((r&15)<<12|(i&63)<<6|(s&63)<<0))}}return o.join("")}function decode64(e){if(!e)return"";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,i,s,o,u,a,f,l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=t.indexOf(e.charAt(l++)),u=t.indexOf(e.charAt(l++)),a=t.indexOf(e.charAt(l++)),f=t.indexOf(e.charAt(l++)),r=o<<2|u>>4,i=(u&15)<<4|a>>2,s=(a&3)<<6|f,n+=String.fromCharCode(r),a!=64&&(n+=String.fromCharCode(i)),f!=64&&(n+=String.fromCharCode(s));while(l<e.length);return U8_16(n)}function encode64(e){if(!e)return"";e=e.toString();var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),r,i,s,o,u,a;s=e.length,i=0,r="";while(i<s){o=e.charCodeAt(i++)&255;if(i==s){r+=t.charAt(o>>2),r+=t.charAt((o&3)<<4),r+="==";break}u=e.charCodeAt(i++);if(i==s){r+=t.charAt(o>>2),r+=t.charAt((o&3)<<4|(u&240)>>4),r+=t.charAt((u&15)<<2),r+="=";break}a=e.charCodeAt(i++),r+=t.charAt(o>>2),r+=t.charAt((o&3)<<4|(u&240)>>4),r+=t.charAt((u&15)<<2|(a&192)>>6),r+=t.charAt(a&63)}return r}function encodeUid(e){if(!e)return"";var t="U"+encode64(e<<2);return t}function dosearch(e){if(trim(e.q.value.replace(/[\/_]/g," "))=="")return location.href="http://www.soku.com/?inner",!1;var t=encodeURIComponent(e.q.value.replace(/[\/_]/g," "));if(e.socondition&&e.socondition[1].id=="outer"&&e.socondition[1].checked)var n="http://www.soku.com/v?keyword="+t;else{var r=e.searchdomain.value;r||(r="http://www.soku.com");var i=e.sbts;e.searchType.value=="bar"&&i!=undefined&&i.value!=""&&(t=t+"_sbt_"+i.value);var n=r+"/search_"+e.searchType.value+"/q_"+t}return typeof search_prompt_flag!="undefined"&&search_prompt_flag&&((new Image).src="http://lstat.youku.com/sokuHintKeyword.php?keyword="+t),location.href=n,!1}function search_show(e,t,n){document.getElementById(e+"SearchType").value=t,document.getElementById(e+"Sel").style.display="none",document.getElementById(e+"Slected").innerHTML=n.innerHTML,document.getElementById(e+"q").focus();var r=document.getElementById("soswitch"),i=document.getElementById("sorelated"),s=document.getElementById("searchextend0");s!=undefined&&t=="bar"&&e=="head"?(s.style.display="block",i&&(i.style.display="none"),r&&(r.style.display="none")):s!=undefined&&e=="head"&&(s.style.display="none",i&&(i.style.display=""),r&&(r.style.display=""));var o=document.getElementById("searchextend1");o==undefined||t!="video"&&t!="playlist"||e!="head"?o!=undefined&&e=="head"&&(o.style.display="none",i&&(i.style.display="")):(o.style.display="block",i&&(i.style.display="none"));var r=document.getElementById("searchextend2");o!=undefined&&t=="user"&&e=="head"?(r.style.display="block",i&&(i.style.display="none")):o!=undefined&&e=="head"&&(r.style.display="none",i&&(i.style.display=""));try{window.clearTimeout(timer)}catch(u){}return!1}function csbt(e,t){e.value==t.value?(e.checked=!1,t.value="bar"):t.value=e.value}function advancedsearch(){var e=document.getElementById("headSearchType").value;e!=="video"&&e!="playlist"&&(e="video");var t=document.getElementById("searchdomain").value;t||(t="http://www.soku.com");var n=t+"/search_advanced"+e;document.getElementById("headq").value!=""&&(n+="/q_"+encodeURIComponent(document.getElementById("headq").value)),window.location=n}function drop_mouseover(e){try{window.clearTimeout(timer)}catch(t){}}function drop_mouseout(e){var t=$(e+"Sel").style.display;t=="block"&&(timer=setTimeout("drop_hide('"+e+"')",1e3))}function drop_hide(e){$(e+"Sel").style.display="none"}function initsearch(e){if(e!="video"&&e!="playlist"&&e!="user"&&e!="bar")return!0;var t={video:"视频",playlist:"专辑",user:"空间",bar:"看吧"};return $("headSearchType").value=e,$("headSlected").innerHTML=t[e],$("footSearchType").value=e,$("footSlected").innerHTML=t[e],!0}function q_answer(){if($("answer").value.length==0){alert("答案不能为空");return}new Ajax.Request("/user/resetpwd/step/2/",{method:"post",parameters:Form.serialize("form_resetpwd2"),onSuccess:function(e){e.responseText=="0"?alert("你的生日不对吧？"):$("resetpwd_content").innerHTML="<p >&nbsp;</p>					    <p >&nbsp;</p>					        <p>请在你注册的邮箱里，按提示修改你的密码</p>"}})}function change_bg(obj,x,theProp,theValue){obj&&(theProp.indexOf("style.")==-1||obj.style)&&(theValue==1||theValue==0?eval("obj."+theProp+"="+theValue):eval("obj."+theProp+"='"+theValue+"'"))}function loadAds(e){if(typeof VERSION=="undefined"||VERSION==null)VERSION="";Nova.addScript("http://urchin.lstat.youku.com"+VERSION+"/index/js/urchin.js"),setTimeout("run_google();",500)}function run_google(){if(!window.urchinTracker){setTimeout(run_google,500);return}_uacct="UA-455269-3";var e=typeof cateStr=="undefined"?!1:cateStr;urchinTracker(e)}function checkLogin(func){var args=new Array;arguments.length>1&&(args=Array.prototype.slice.call(arguments)),islogin()?func&&func!=""&&(args.length>0&&args.shift(),typeof func=="string"&&(func=eval(func)),typeof func=="function"&&func.apply(func,args)):func&&func!=""?login.apply(login,args):login()}function MM_openBrWindow(e,t,n){window.open(e,t,n)}function sendVideoLink(e){var t="http://www.youku.com/contact/sendlink?obj=v&id="+e;checkLogin(MM_openBrWindow,t,"","scrollbars=yes,width=695,height=540,resizable=yes")}function sendPlayListLink(e){var t="http://www.youku.com/contact/sendlink?obj=playlist&id="+e;checkLogin(MM_openBrWindow,t,"","scrollbars=yes,width=695,height=540,resizable=yes")}function isEmail(e){return(new RegExp(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/)).test(e)}function login(e){if(passport=="1"){popwin==null&&(popwin=new Qwindow);var t=typeof e!="undefined"&&typeof e.type!="undefined"&&typeof e.callBack!="undefined"?!0:!1,n=typeof passport_url=="undefined"?"":passport_url;popwin.setContent("iframe",n+"/index_login/"+(t?"?from="+e.type:"")).hide()}else pop!=null&&pop.close(),pop=new Popup({contentType:1,isSupportDraging:!1,isReloadOnClose:!1,width:540,height:300}),pop.setContents({title:"登录",contentUrl:"/index_login/"}),pop.build().show();login_callback_user=t?e.callBack:e,arguments.length>1&&(login_callback_user_args=Array.prototype.slice.call(arguments),login_callback_user_args.length>0&&login_callback_user_args.shift())}function findpwd(e){pop!=null&&pop.close();var t="/index_findpwd";if(typeof e=="number"){var n=new Image;n.src="http://hz.youku.com/red/click.php?tp=1&cp="+e+"&cpp=1000427&url="}pop=new Popup({contentType:1,isSupportDraging:!1,isReloadOnClose:!1,width:540,height:300}),pop.setContents({title:"忘记密码",contentUrl:t}),pop.build().show()}function addFriend(e,t){if(!islogin()){login(addFriend.bind(this,e,t));return}var n="/my_friend/type_addFriend";empty(t)||(t=="bar"?n="/bar_friend/type_addFriend":t=="search"&&(n="/search_friend/type_addFriend")),nova_request(function(e){switch(e){case"error":alert("页面载入错误，请刷新本页后重试！");break;case"self":alert("不能将自己加为好友！");break;case"already":alert("当前用户已经是您的好友了！");break;default:$("groupDialog")&&$("groupDialog").parentNode.removeChild($("groupDialog")),window.__addFriendFromModule=t;var n=document.createElement("div");n.innerHTML=e,n=n.firstChild;while(n.nodeType==3)n=n.nextSibling;var r,i,s;window.innerWidth?r=window.innerWidth:document.body&&document.body.clientWidth&&(r=document.body.clientWidth),window.innerHeight?i=window.innerHeight:document.documentElement&&document.documentElement.clientHeight&&(i=document.documentElement.clientHeight),document.documentElement.scrollTop?s=document.documentElement.scrollTop:document.body&&document.body.scrollTop&&(s=document.body.scrollTop),document.body.appendChild(n),s||(s=0),$("groupDialog").style.top=i/2-$("groupDialog").clientHeight/2+s+"px",$("groupDialog").style.left=r/2-$("groupDialog").clientWidth/2+"px",$("groupDialog").style.zIndex=1e5}}.bind(t),n,{friendId:e},"get")}function _addFriend(e,t,n){e||(e=window.event),Event.stop(e);var r="/QMy/~ajax/addFriend";if(typeof window.__addFriendFromModule=="undefined")var i="";else i=window.__addFriendFromModule;empty(i)||i=="bar"&&(r="/QBar/~ajax/addFriend");var s=function(e,t,n){return nova_call(r,e,t,n)},o=function(e){$("groupDialog")&&$("groupDialog").parentNode.removeChild($("groupDialog"));switch(e){case"ok":alert("添加好友成功");return;case"validate":alert("该用户已设置好友验证，已经成功发送好友请求！");return;case"unallowed":alert("该用户已设置不允许任何人加他为好友！");return;case"self":alert("不能将自己加为好友！");return;case"already":alert("当前用户已经是你的好友了！");return;case!1:alert("增加好友失败，请与系统管理员联系！");return;default:alert("未知的返回值类型，请与系统管理员联系！"+e)}};s({friendId:t,groupId:n},o)}function login_callback(){login_callback_user&&login_callback_user!="mynull"&&(typeof login_callback_user=="string"&&(login_callback_user=eval(login_callback_user)),typeof login_callback_user=="function"&&login_callback_user.apply(login_callback_user,login_callback_user_args)),update_login_status()}function update_login_status(){for(var e in window)if(typeof window[e]=="function"&&e.indexOf("update_login_status_hook_")!=-1){var t=window[e];t()}}function subscribe_callback(e){if(!subscribe_obj)return;var t=subscribe_obj.subtype=="0"?"用户":subscribe_obj.subtype=="1"?"标签":"专辑";switch(e){case"ok2":FeedPublishTip("订阅"+t);case"ok":alert("订阅成功！");return;case"error":alert("数据库操作异常！");return;case-1:alert("参数校验失败！");return;case 1:alert("您订阅的"+t+"不存在！");return;case 2:var n=subscribe_obj.subtype=="0"?"不能订阅自己！":"不能订阅自己的专辑！";alert(n);return;case 3:alert("该"+t+"已经订阅！",null,!1,!0);return;case 4:alert("标签含有禁忌词不能被订阅！");return;default:alert("未知的错误类型！")}}function subscribe(e,t){if(!islogin()){login(subscribe.bind(this,e,t));return}subscribe_obj={subtype:e,target:encodeURIComponent(t)},empty(udomain)&&(udomain="u.youku.com");var n="http://"+udomain+"/QMy/~ajax/addSubscribe";nova_call(n,subscribe_obj,"subscribe_callback",undefined,1)}function mhPopChannelList(e,t,n){try{window.clearTimeout(popChannelListTimer)}catch(r){}if(Position.within($(e),Event.pointerX(t),Event.pointerY(t)))return;if(typeof n==undefined||!n)popChannelListTimer=window.setTimeout('_mhPopChannelList("'+e+'")',700)}function _mhPopChannelList(e){var t=$(e);t&&t.style.display!="block"?t.style.display="block":t.style.display="none"}function getIkuAgent(){if(!ikuagent&&navigator.userAgent.indexOf("MSIE")!=-1&&window.ActiveXObject)try{ikuagent=new ActiveXObject("iKuAgent.KuAgent2")}catch(e){}return ikuagent}function getP2PState(){return(iku=getIkuAgent())!=undefined?iku.GetP2PPort():""}function getIkuId(){return(iku=getIkuAgent())!=undefined?ikuagent.Youku_Hao:""}(function(e){if(!e)return;if(e.Fee)return;window.nova_init_hook_Fee_buyAutobind=function(){e.Fee.buyAutobind()},e.Fee={buy:function(e,t){if(!e)return;document.domain!="youku.com"&&(document.domain="youku.com"),typeof (window["passport"]=="undefined")&&(window.passport="1");if(!window.islogin&&!window.Qwindow)return;var n="http://pay.youku.com/buy/redirect.html",r=arguments[1]?t+n+"?"+e:n+"?"+e;window.location=r},buyAutobind:function(){var e="buy_query",t="buy_hzclick",n=$$("["+e+"]"),r=this;for(var i=0,s=n.length;i<n.length;i++)n[i].observe("click",function(n){var i=this.getAttribute(e),s=this.getAttribute(t);i&&(s?r.buy(i,s):r.buy(i))});return this}}})(window);var dURL=window.location.href.toLowerCase();if(dURL.indexOf("youku")<0&&dURL.indexOf("yoqoo")<0&&dURL.indexOf("soku")<0){var path=document.location.pathname;window.location.href="http://www.youku.com"+path}window.nova_init_hook_initsearch=function(){var e=document.location.pathname.replace("_","/"),t=e.split("/"),n="index";t[1]&&(n=t[1]);var r=n;t[1]&&t[1].indexOf("_")>0?r=t[1].split("_")[1]:t[2]&&t[2].indexOf("_")>0?r=t[2]:t[2]&&n=="search"&&(r=t[2]);switch(n){case"search":n=r;break;case"my":r="user","bar"==t[2]?r="bar":"friend"==t[2]?r="user":"playlist"==t[2]&&(r="playlist");break;case"user":r="user","v"==t[2]||"video"==t[2]?r="video":"friend"==t[2]?r="user":"fav"==t[2]?r="video":"playlist"==t[2]?r="playlist":"bar"==t[2]&&(r="bar");break;case"v":r="video","playlist"==t[2]&&(r="playlist")}try{initsearch(r)}catch(i){}loadAds(n)},window.nova_init_hook_partner=function(){var e=Nova.Cookie.get("PARTNER");if(e=="tjcnc"){var t=document.getElementsByTagName("a");for(var n=0;n<t.length;n++)t[n].target!=""&&t[n].target!="_self"&&(t[n].target="_self")}};var pop=null,login_callback_user=null,login_callback_user_args=new Array,popwin=null;openLoginDialog=login;var default_logout_callback=function(e){e&&top.location.reload()},logout=function(e){e=e||"default_logout_callback",empty(udomain)&&(udomain="u.youku.com"),nova_call("http://"+udomain+"/QUser/~ajax/logout","",e,undefined,1)},islogin=function(){var e="",t=document.cookie.split(";");for(var n=0;n<t.length;n++){var r=t[n];while(r.charAt(0)==" ")r=r.substring(1,r.length);if(r.indexOf("u=")==0||r.indexOf("k=")==0)var i=r;if(r.indexOf("yktk=")==0){var s=decode64(decodeURIComponent(r).split("|")[3]);if(s.indexOf(",")>-1&&s.indexOf("nn:")>-1&&s.indexOf("id:")>-1){var e=s.split(",")[1].split(":")[1];if(e!="")break}}}if(e==""&&i){var e=i.substring(2,i.length);e=="__LOGOUT__"&&(e="")}return e==""?!1:!0},get_username=function(){var e="",t=document.cookie.split(";"),n=arguments.length;for(var r=0;r<t.length;r++){var i=t[r];while(i.charAt(0)==" ")i=i.substring(1,i.length);if(i.indexOf("u=")==0||i.indexOf("k=")==0)var s=i;if(i.indexOf("_l_lgi=")==0)var o=i;if(i.indexOf("yktk=")==0){var u=decode64(decodeURIComponent(i).split("|")[3]);if(u.indexOf(",")>-1&&u.indexOf("nn:")>-1&&u.indexOf("id:")>-1){var e=u.split(",")[1].split(":")[1],a=u.split(",")[0].split(":")[1];if(e!="")break}}}if(e==""||a==""){if(s){var e=s.substring(2,s.length);e=="__LOGOUT__"?e="":e=decodeURIComponent(e)}if(o)var a=o.substring(7,o.length)}if(n==0)return e==""?"":e;if(n==1&&arguments[0]=="all")return{username:e,userid:a}},FeedPublishTip=function(e){empty(pop)||pop.close(),setTimeout(function(){pop=new Popup({contentType:1,isSupportDraging:!1,isReloadOnClose:!1,width:248,height:130,isBackgroundCanClick:!0}),pop.setContent("title","同步到合作方网站"),pop.setContent("contentUrl","/partner_feedtips.html?type="+encodeURIComponent(e)),pop.build().show(),document.domain="youku.com"},1e3)},mailto=function(e){if(!islogin()){login(mailto.bind(this,e));return}window.open("/my_mail/type_mini_receive_"+encodeURIComponent(e),"","location=no,scrollbars=no,width=410,height=320")};window.nova_init_hook_main_login_status=update_login_status;var subscribe_obj=null,subscribeUser=function(e){subscribe(0,e)},popChannelListTimer=null,ikuagent;getP2PState(),window.Log||(window.Log={}),Log.logCookieKey="logCookieKey",Log._addScript=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},Log.addScript=function(e){var t=new RegExp("@1@","g"),n=new RegExp("@2@","g"),r=new RegExp("@3@","g"),i=new RegExp("@4@","g"),s=new RegExp("@5@","g");e=e.replace(t,"http://hz.youku.com/red/click.php").replace(n,"http://hz.youku.com/red/relatedVideoClick.php").replace(r,"http://lstat.youku.com/nstay.php").replace(i,"http://e.stat.youku.com/hot/click").replace(s," http://e.stat.youku.com/recommond/log"),e+="&="+Math.floor(Math.random()*1e6),Log._addScript(e)},Log.log=function(e,t,n){if(typeof e!="number")return;var r=n?n:0,i="";if(r==0){var s=document.cookie,o=s.split("; ");for(var u=0;u<o.length;u++){var a=o[u].split("=");if(Log.logCookieKey==a[0]){a[1]!="invalid"&&(i=unescape(o[u].substring(Log.logCookieKey.length+1,o[u].length)));break}}}i+="@"+e+"@";if(typeof t=="object"){argUrl="";for(arg in t)argUrl+="&"+arg+"="+t[arg];e==4&&(document.cookie="__utmarea="+t.charset+";path=/;domain=youku.com"),i+="?"+argUrl.substring(1,argUrl.length)+"^"}else e==4&&(document.cookie="__utmarea="+t.substring(8,t.length)+";path=/;domain=youku.com"),i+="?"+t+"^";r==0?document.cookie=Log.logCookieKey+"="+escape(i)+";path=/;domain=youku.com":Log.addScript(i)},Log.readLogCookie=function(){var e=document.cookie,t=e.split("; "),n="";found=0;for(var r=0;r<t.length;r++){var i=t[r].split("=");if(Log.logCookieKey==i[0]){found=1;if(i[1]=="invalid")break;n=unescape(t[r].substring(Log.logCookieKey.length+1,t[r].length)),requestUrl=n.substring(0,n.length-1).split("^");for(var r=0;r<requestUrl.length;r++)Log.addScript(requestUrl[r]);document.cookie=Log.logCookieKey+"=invalid"+";path=/;domain=youku.com";break}}};var logUnCookie=0,logFrame=0,logpvid="-";navigator.cookieEnabled||(logUnCookie=1),top.location!=self.location&&(logFrame=1);var getPvid=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0,r="",i=new Date;for(n=0;n<e;n++){var s=parseInt(Math.random()*Math.pow(10,6))%t.length;r+=t[s]}return i.getTime()+r};logPvid=getPvid(3)